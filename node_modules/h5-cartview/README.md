# h5 泛用型购物车
## Install
使用 npm 引入，注意更新版本号

```shell
$ npm install eleme/h5-cartview#X.Y.Z
```

依赖 Vue 1.x 和 [web-cart](https://github.com/eleme/web-cart)

使用 UMD 方式打包，请按环境支持的方式引入

```javascript
// ES6 module
import { CartView, CartButton } from 'h5-cartview';

// CommonJS
const { CartView, CartButton } = require('h5-cartview');

// Global variable
const { CartView, CartButton } = CartView;

// AMD ...
```

在支持本库配置的开发环境中可以直接引用源码自行处理，比较方便调试

```javascript
// ES6 module
import { CartView, CartButton } from 'h5-cartview/src';

// CommonJS
const { CartView, CartButton } = require('h5-cartview/src');
```

## Usage
本库提供三个 Vue 组件，分别是：
- 界面底部购物车本体 CartView
- 操作购物车的按钮 CartButton
- 多规格模态框 CartSpecPanel

CartView 拥有如下 props 供配置

```javascript
// 对应商家 id 生成的 web-cart 对象
cart: {
  type: Object,
  required: true,
},
// 当前编辑的篮子 (group) 索引
groupIndex: {
  type: Number,
  default: 0,
},
// 配送费
deliveryFree: {
  type: Number,
},
// 餐盒费
packingFree: {
  type: Number,
},
// 购物车提交按钮的文本和可访问状态
submitButton: {
  type: Object,
  default: {
    disabled: true,
    text: '去下单',
  },
},
// 点击提交按钮的行为
submit: {
  type: Function,
  default() {
    console.info('DEFAULT SUBMITTING METHOD HAS BEEN CALLED.');
  },
},
// 设置购物车点击不弹出的逻辑，默认在购物车没商品时不弹出
noToggle: {
  type: Function,
  default() {
    return !this.cart.quantity;
  },
},
// 设置是否有清空购物车按钮
noClear: {
  type: Boolean,
  default: false,
},
// 设置确认清空购物车函数，要求返回 Promise 对象
confirmClear: {
  type: Function,
  default() {
    return Promise.resolve(true);
  },
},
```

CartButton 的 props 如下

```javascript
// 对应商家 id 生成的 web-cart 对象
cart: {
  type: Object,
  required: true,
},
// 当前编辑的篮子 (group) 索引
groupIndex: {
  type: Number,
  default: 0,
},
// 当前商品的信息 （必须是包含 web-cart 需要的信息和商品库存 (stock) 的对象）
menuEntity: {
  type: Object,
  required: true,
},
// 设置确认删除购物车商品函数，要求返回 Promise 对象
confirmRemove: {
  type: Function,
  default() {
    return Promise.resolve(true);
  }
},
// 可选，需要加入购物车小球动画时传入小球飞入 DOM 的坐标对象 { top, left }
flyPosition: {
  type: Object,
},
```

## Develop
默认提供了 watching 和 hot reload
由于默认的 8080 端口很易被占用，这里开发时需要自己随意指定一个未占用的端口

```shell
$ npm run dev --port { 自定义端口 }
```

远程调试可使用（需要先让自己的移动设备与本机相链接）

```shell
$ npm run remote-dev { 你的 IP 地址 }
```

使用 webpack 生成支持 UMD 的压缩版本

```shell
$ npm run build
```
