/*eslint-env node */
const cssnext = require('postcss-cssnext');
const postcssFlexFallback = require('postcss-flex-fallback');
const postcssPx2rem = require('postcss-px2rem');
const svgoConfig = require('./svgo-config.json');

module.exports = {
  module: {
    preLoaders: [
      { test: /\.svg$/, loader: 'svgo?' + JSON.stringify(svgoConfig) },
    ],
    loaders: [
      { test: /\.vue$/, loader: 'vue' },
      { test: /\.js$/, loader: 'babel' },
      { test: /\.(jpg|jpeg|jif|png)$/, loader: 'url?limit=10000' },
      { test: /\.svg$/, exclude: [/not-sprite-svg/], loader: 'svg-sprite' },
      { test: /\.svg$/, include: [/not-sprite-svg/], loader: 'url?limit=10000' },
    ],
  },
  vue: {
    loaders: {
      js: 'babel!eslint',
    },
    autoprefixer: false,
    postcss: [
      cssnext({ browsers: ['last 2 versions', 'Android >= 2.1'] }),
      postcssFlexFallback(),
      postcssPx2rem({remUnit: 73}),
    ],
  },
};
